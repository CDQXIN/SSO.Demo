@{
    ViewData["Title"] = "添加用户";
    Layout = null;
}
@using SSO.Demo.Web1.Model.User
@model UserParams
<div class="site-demo site-demo-body">
    <div class="layui-main" style="width: 350px">
        <postform asp-action="Add" asp-controller="User">
            @Html.HiddenFor(a => a.UserId)
            <div class="layui-form-item">
                <label class="layui-form-label">用户名</label>
                <editor asp-for="UserName" input-display="LayuiInputInline" />
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">密码</label>
                <editor asp-for="Password" input-display="LayuiInputInline" type="password" />
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">性别</label>
                <radioGroup asp-for="Sex" asp-data="typeof(Sex)" input-display="LayuiInputInline"/>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">创建时间</label>
                <datetimepicker asp-for="CreateDateTime" placeholder="创建时间" input-display="LayuiInputInline"/>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">省份</label>
                <dropdownlist asp-for="Sex" asp-data="typeof(Sex)" input-display="LayuiInputInline" defaultText="== 性别 =="/>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
                </div>
            </div>
        </postform>
    </div>
</div>

<script>
    layui.use(['form'], function () {
        var form = layui.form, layer = layui.layer;

        //监听提交
        form.on('submit(demo1)', function (data) {
            layer.confirm('是否确认提交？',
                function (confirmIndex) {
                    $.post("/user/add",
                        data.field,
                        function (result) {
                            if (result.success) {
                                layer.close(confirmIndex);
                                layer.msg(result.message);

                                layer.closeAll();
                            } else
                                layer.msg(result.message);
                        });
                });
            return false;
        });
    });
</script>
